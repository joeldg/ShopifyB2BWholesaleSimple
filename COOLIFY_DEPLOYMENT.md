# Coolify Deployment Guide

## ðŸš€ **Deploying B2B/Wholesale Simplifier to Coolify**

### **Step 1: Access Coolify**
- URL: http://3.101.146.38:8000/
- Login with your credentials

### **Step 2: Create New Application**
1. Click "New Application"
2. Choose "Git Repository" as source
3. Connect your GitHub repository: `ShopifyB2BWholesaleSimple/wholesale-simplifier`
4. Select the `wholesale-simplifier` folder

### **Step 3: Configure Application**
- **Name**: `b2b-wholesale-simplifier`
- **Type**: `Node.js`
- **Build Command**: `npm run build`
- **Start Command**: `npm start`
- **Node Version**: `18`

### **Step 4: Add PostgreSQL Database**
1. In the application dashboard, click "Add Service"
2. Choose "PostgreSQL"
3. **Database Name**: `b2b_wholesale_simplifier`
4. **User**: `wholesale_user`
5. **Password**: Generate a strong password

### **Step 5: Set Environment Variables**
Add these environment variables in Coolify:

```bash
# Database (will be auto-generated by Coolify)
DATABASE_URL=postgresql://wholesale_user:PASSWORD@postgres:5432/b2b_wholesale_simplifier

# Shopify App
SHOPIFY_API_KEY=2d7ba1b15cef8ff52b0d23c0bd287bbb
SHOPIFY_API_SECRET=YOUR_API_SECRET_FROM_SHOPIFY_PARTNER_DASHBOARD
SHOPIFY_APP_URL=http://b2b-wholesale-simplifier.3.101.146.38.nip.io
SHOPIFY_SCOPES=read_products,write_products,read_customers,write_customers,read_orders,write_orders

# Session
SESSION_SECRET=your-super-secret-session-key-here

# App
NODE_ENV=production
PORT=3000
```

### **Step 6: Configure Domain**
- **Domain**: `b2b-wholesale-simplifier.3.101.146.38.nip.io`
- **SSL**: Enable if available

### **Step 7: Deploy**
1. Click "Deploy" in Coolify
2. Wait for build to complete
3. Check logs for any errors

### **Step 8: Update Shopify App**
1. Run: `shopify app deploy` to update Shopify with new URLs
2. Test the app in your Shopify store

## ðŸ”§ **Troubleshooting**

### **Database Issues**
- Check PostgreSQL service is running
- Verify DATABASE_URL is correct
- Run database migrations: `npx prisma db push`

### **Authentication Issues**
- Verify SHOPIFY_API_KEY and SHOPIFY_API_SECRET
- Check SHOPIFY_APP_URL matches Coolify domain
- Ensure redirect URLs are correct

### **Build Issues**
- Check Node.js version is 18
- Verify all dependencies are installed
- Check build logs for errors

## ðŸ“Š **Expected Results**
- App accessible at: http://b2b-wholesale-simplifier.3.101.146.38.nip.io
- Health check: http://b2b-wholesale-simplifier.3.101.146.38.nip.io/api/health
- Database connected and sessions working
- Shopify authentication working properly


